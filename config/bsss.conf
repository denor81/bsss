#!/usr/bin/env bash
# BSSS Configuration File
# Этот файл содержит все конфигурационные параметры проекта BSSS
# Каждая секция отвечает за определенную область настроек

#=============================================================================
# СЕКЦИЯ: УСТАНОВЩИК И РЕПОЗИТОРИЙ
#=============================================================================

# Параметры GitHub репозитория
REPO_USER="denor81"
REPO_NAME="bsss"
RELEASE_API_URL="https://api.github.com/repos/${REPO_USER}/${REPO_NAME}/releases/latest"

# Пути для установки и временные файлы
TEMP_PROJECT_DIR="/tmp/bsss-$$"
INSTALL_DIR="/opt/bsss"
BINARY_LINK_NAME="/usr/local/bin/bsss"
ALT_BINARY_LINK_NAME="/usr/local/bin/bsss-setup"

# URL для one-line установки
ONELINE_INSTALL_URL="https://raw.githubusercontent.com/${REPO_USER}/${REPO_NAME}/main/oneline-runner.sh"

#=============================================================================
# СЕКЦИЯ: SSH КОНФИГУРАЦИЯ
#=============================================================================

# Пути к SSH конфигурационным файлам
SSH_CONFIG_DIR="/etc/ssh/sshd_config.d"
SSH_MAIN_CONFIG="/etc/ssh/sshd_config"

# Параметры SSH по умолчанию
SSH_PORT_DEFAULT="22"
SSH_PASSWORD_AUTH_PARAM="PasswordAuthentication"
SSH_PASSWORD_AUTH_VALUE="no"

# Паттерны для файлов конфигурации SSH
SSH_PORT_CONFIG_PATTERN="ssh-port"
SSH_AUTH_CONFIG_PATTERN="disable-pass-auth"

#=============================================================================
# СЕКЦИЯ: СЕТЕВЫЕ НАСТРОЙКИ
#=============================================================================

# Настройки брандмауэра
UFW_SERVICE_NAME="ufw"
UFW_DEFAULT_POLICY="deny"
UFW_SSH_PROTOCOL="tcp"

#=============================================================================
# СЕКЦИЯ: СИСТЕМНЫЕ НАСТРОЙКИ
#=============================================================================

# Параметры GRUB для отключения IPv6
GRUB_CONFIG_DIR="/etc/default/grub.d"
GRUB_MAIN_CONFIG="/etc/default/grub"
GRUB_CMDLINE_PARAM="GRUB_CMDLINE_LINUX_DEFAULT"
GRUB_IPV6_DISABLE_VALUE="ipv6.disable=1"

# Паттерн для файлов конфигурации IPv6
GRUB_IPV6_CONFIG_PATTERN="ipv6"

#=============================================================================
# СЕКЦИЯ: КОНФИГУРАЦИЯ ФАЙЛОВ
#=============================================================================

# Индексы для файлов конфигурации
CONFIG_DEFAULT_INDEX="10"
CONFIG_MAX_INDEX="99"
CONFIG_INDEX_STEP="10"

# Расширение файлов конфигурации
CONFIG_FILE_EXTENSION=".conf"

# Префикс для файлов, создаваемых BSSS
BSSS_CONFIG_PREFIX="bsss"

#=============================================================================
# СЕКЦИЯ: СИСТЕМНЫЕ СЕРВИСЫ
#=============================================================================

# Имена системных сервисов
SSH_SERVICE_NAME="ssh"
SYSTEMD_SERVICE_NAME="systemd"

# Команды для управления сервисами
GRUB_UPDATE_COMMAND="update-grub"

#=============================================================================
# СЕКЦИЯ: СООБЩЕНИЯ И ИНТЕРФЕЙС
#=============================================================================

# Текстовые сообщения и метки
BSSS_CONFIG_COMMENT="# Configuration by BSSS"
BSSS_INSTALLATION_COMPLETE="[*] Установка завершена!"
BSSS_REMOVAL_COMPLETE="[*] BSSS успешно удален из системы."

# Статусы и состояния
STATUS_ACTIVE="active"
STATUS_INACTIVE="inactive"
STATUS_NOTFOUND="notfound"

# Значения для подтверждений
CONFIRM_YES="Y"
CONFIRM_NO="n"
CONFIRM_CANCEL="c"

#=============================================================================
# СЕКЦИЯ: ДИАПАЗОНЫ И ОГРАНИЧЕНИЯ
#=============================================================================

# Диапазон допустимых портов
PORT_MIN=1
PORT_MAX=65535

# Файлы для проверки системного состояния
REBOOT_REQUIRED_FILE="/var/run/reboot-required"